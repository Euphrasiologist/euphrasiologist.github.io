<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>Radial text with highlighting Â· Another blog</title> <meta name="description" content="This is more of a test than anything, to see if I could get an interactive visualisation up and running in this blog format. It would seem you can!"> <link rel="icon" href="http://localhost:4000/the-plain/assets/favicon.png"> <link rel="apple-touch-icon" href="http://localhost:4000/the-plain/assets/touch-icon.png"> <link rel="stylesheet" href="http://localhost:4000/the-plain/assets/core.css"> <link rel="canonical" href="http://localhost:4000/the-plain/radial-text"> <link rel="alternate" type="application/atom+xml" title="Another blog" href="http://localhost:4000/the-plain/feed.xml" /> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <script type="text/javascript" src="https://d3js.org/d3.v6.min.js"></script> </head> <body> <aside class="logo"> <a href="http://localhost:4000/the-plain/"> <img src="https://avatars1.githubusercontent.com/u/40207129?v=4" alt="" class="logo-avatar"> </a> <span class="logo-prompt code">Take me back!</span> </aside> <div id="content"> <article> <div class="center"> <h1 class="title">Radial text with highlighting</h1> <time class="code">November 25, 2020</time> </div> <div class="divider"></div> <p>This is more of a test than anything, to see if I could get an interactive visualisation up and running in this blog format. It would seem you can!</p> <p>The radial text here is useful for labelling radial diagrams (e.g. radial phylogenies).</p> <example> <script> function rotate(d) { return ((d.start + d.end) / 2 / Math.PI) * 180 + 90; } function letters(str) { return ( str .split("") .map(a => ({ sort: Math.random(), value: a })) .sort((a, b) => a.sort - b.sort) .map(a => a.value) .join("") ); } function obs(length) { let res = []; for (let i = 0; i < length; i++) { res.push({ string: letters("maxbrown.xyz") }); } let rotations = (Math.PI * 2) / res.length; for (let i = 1; i < res.length; i++) { res[0].start = 0; res[0].end = rotations; res[i].start = res[i - 1].start + rotations; res[i].end = res[i - 1].end + rotations; } return res; } let diam = 400; const svg = d3.select("example") .append("svg") .attr("width", diam) .attr("height", diam) .attr("viewBox", `${-diam / 2} ${-diam / 2} ${diam} ${diam}`) .attr("font-family", "sans-serif") .attr("font-size", 10) .attr("align","right"); svg.append("style").text(` .label--active { font-weight: bold; fill: red } svg { display: block; margin: auto; } `); const data = obs(40); const words = svg .append("g") .selectAll("text") .data(data) .join("text") .attr("dy", ".31em") .attr("id", (d, i) => "word" + i) .attr( "transform", d => `rotate(${rotate(d)}) translate(${diam/2},0) ${ d.start > Math.PI ? "" : " rotate(180)" }` ) .attr("text-anchor", d => d.start < Math.PI + data[0].end ? "start" : "end" ) .text(d => d.string); words .on("mouseover", function(event, d) { d3.select(this).classed("label--active", true); }) .on("mouseout", function(event, d) { d3.select(this).classed("label--active", false); }) </script> </example> </article> <div class="page-navigation code"> <a class="home" href="http://localhost:4000/the-plain/" title="Back to Index">Index</a> </div> </div> <div class="footer"> <span class="block">&copy; 2020 Max Brown</span> <!--<span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span>--> </div> </body> </html>
