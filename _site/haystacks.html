<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>Haystacks Â· Another blog</title> <meta name="description" content="Some falling haystacks implemented using some SVG path primitives. See this link for more details."> <link rel="icon" href="https://www.maxbrown.xyz//assets/favicon.png"> <link rel="apple-touch-icon" href="https://www.maxbrown.xyz//assets/touch-icon.png"> <link rel="stylesheet" href="https://www.maxbrown.xyz//assets/core.css"> <link rel="canonical" href="https://www.maxbrown.xyz//haystacks"> <link rel="alternate" type="application/atom+xml" title="Another blog" href="https://www.maxbrown.xyz//feed.xml" /> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <script type="text/javascript" src="https://d3js.org/d3.v6.min.js"></script> </head> <body> <aside class="logo"> <a href="https://www.maxbrown.xyz//"> <img src="https://avatars1.githubusercontent.com/u/40207129?v=4" alt="" class="logo-avatar"> </a> <span class="logo-prompt code">Take me back!</span> </aside> <div id="content"> <article> <div class="center"> <h1 class="title">Haystacks</h1> <time class="code">December 20, 2020</time> </div> <div class="divider"></div> <p>Some falling haystacks implemented using some SVG path primitives. See <a href="https://github.com/Euphrasiologist/plotutils">this link</a> for more details.</p> <example> <script> const data = []; const dim = 4; for (let i = 0; i < dim * 100; i++) { for (let j = 0; j < dim; j++) { data.push({ x1: getRandomInt(j * 95, 95 + j * 95) + 10, y1: getRandomInt(j * 95, 95 + j * 95) + 10, x2: getRandomInt(j * 95, 95 + j * 95) + 10, y2: getRandomInt(j * 95, 95 + j * 95) + 10 }); } } const svg = d3 .select("example") .append("svg") .attr("width", 400) .attr("height", 400); svg .append("rect") .attr("width", "100%") .attr("height", "100%") .attr("fill", "#f8e9d9"); svg.append("style").text(` .line--active { stroke: red } svg { display: block; margin: auto; } `); const generator = line() .x1(d => d.x1) .y1(d => d.y1) .x2(d => d.x2) .y2(d => d.y2); const lines = svg .selectAll("path2") .data(data) .join("path") .attr("d", generator) .attr("id", (d, i) => "line_" + i) .attr("stroke", (d, i) => (i % 3 ? "black" : "#f8e9d9")) .attr("fill", "none"); lines .on("mouseover", function(event, d) { d3.select(this).classed("line--active", true); }) .on("mouseout", function(event, d) { d3.select(this).classed("line--active", false); }); function line() { let x1 = 0, y1 = 0, x2 = 0, y2 = 0; function draw(datum) { const x10 = typeof x1 === "function" ? x1(datum) : x1, y10 = typeof y1 === "function" ? y1(datum) : y1, x20 = typeof x2 === "function" ? x2(datum) : x2, y20 = typeof y2 === "function" ? y2(datum) : y2; return `M${x10},${y10}L${x20},${y20}`; } draw.x1 = function(_) { return arguments.length ? ((x1 = _), draw) : x1; }; draw.y1 = function(_) { return arguments.length ? ((y1 = _), draw) : y1; }; draw.x2 = function(_) { return arguments.length ? ((x2 = _), draw) : x2; }; draw.y2 = function(_) { return arguments.length ? ((y2 = _), draw) : y2; }; return draw; } function getRandomInt(min, max) { min = Math.ceil(min); max = Math.floor(max); return Math.floor(Math.random() * (max - min + 1)) + min; } </script> </example> </article> <div class="page-navigation code"> <a class="home" href="https://www.maxbrown.xyz//" title="Back to Index">Index</a> <span> &middot; </span> <a class="prev" href="https://www.maxbrown.xyz//Athaliana-GC" title="PREV: Visualising GC content across chromosomes">&gt;&gt;</a> </div> </div> <div class="footer"> <span class="block">&copy; 2020 Max Brown</span> <!--<span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span>--> </div> </body> </html>
