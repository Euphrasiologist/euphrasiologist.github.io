<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>Animating some SVG lines Â· Another blog</title> <meta name="description" content="A bit of a challenge for me to set up an animation like this outside of the Observable runtime. Makes use of requestAnimationFrame in an SVG. And it looks pr..."> <link rel="icon" href="http://localhost:4000//assets/favicon.png"> <link rel="apple-touch-icon" href="http://localhost:4000//assets/touch-icon.png"> <link rel="stylesheet" href="http://localhost:4000//assets/core.css"> <link rel="canonical" href="http://localhost:4000//svg-line-animation"> <link rel="alternate" type="application/atom+xml" title="Another blog" href="http://localhost:4000//feed.xml" /> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> <script type="text/javascript" src="https://d3js.org/d3.v6.min.js"></script> </head> <body> <aside class="logo"> <a href="http://localhost:4000//"> <img src="https://avatars1.githubusercontent.com/u/40207129?v=4" alt="" class="logo-avatar"> </a> <span class="logo-prompt code">Take me back!</span> </aside> <div id="content"> <article> <div class="center"> <h1 class="title">Animating some SVG lines</h1> <time class="code">August 30, 2020</time> </div> <div class="divider"></div> <p>A bit of a challenge for me to set up an animation like this outside of the <a href="https://observablehq.com/@euphrasiologist/animating-path-elements-simply">Observable</a> runtime. Makes use of <code class="language-plaintext highlighter-rouge">requestAnimationFrame</code> in an SVG. And it looks pretty!</p> <example> <script> const svg = d3.select("example") .append("svg") .attr("width", 1000) .attr("height", 500); let frame; svg.append("style").text(` svg { display: block; margin: auto; } `); svg .append("g") .selectAll("lines") .data(d3.range(100)) .join("path") .attr("d", d => describeArc( d * 3 + 150, d + 150, 100 + d, Date.now() / 1000 - d / 100, Date.now() / 800 - d / 100 ) ) .attr('fill-opacity', '0') .attr("class", "path") .attr("stroke", "#777"); function moveSVG(time) { const x = Date.now(); d3.selectAll("path").attr("d", d => describeArc( d * 3 + 150, d + 150, 100 + d, Date.now() / 1000 - d / 100, Date.now() / 800 - d / 100 ) ); frame = requestAnimationFrame(moveSVG); } requestAnimationFrame(moveSVG); function polarToCartesian(centerX, centerY, radius, angleInRadians) { return { x: centerX + (radius * Math.cos(angleInRadians)), y: centerY + (radius * Math.sin(angleInRadians)) }; }; function describeArc(x, y, radius, startAngle, endAngle) { var start = polarToCartesian(x, y, radius, startAngle); var end = polarToCartesian(x, y, radius, endAngle); var d = [ "M", start.x, start.y, "A", radius, radius, 0, 0, 0, end.x, end.y ].join(" "); return d; }; </script> </example> </article> <div class="page-navigation code"> <a class="next" href="http://localhost:4000//radial-text" title="NEXT: Radial text with highlighting">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="http://localhost:4000//" title="Back to Index">Index</a> <span> &middot; </span> <a class="prev" href="http://localhost:4000//eyebright-hybrids" title="PREV: How many eyebright hybrids are there?">&gt;&gt;</a> </div> </div> <div class="footer"> <span class="block">&copy; 2021 Max Brown</span> <!--<span class="block"><small>&lt;/&gt; Powered by <a href="https://jekyllrb.com/">Jekyll</a> and <a href="https://github.com/heiswayi/the-plain">The Plain theme</a>.</small></span>--> </div> </body> </html>
